(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6782e2c0"],{"99af":function(t,a,e){"use strict";var s=e("23e7"),r=e("d039"),o=e("e8b5"),i=e("861d"),n=e("7b0b"),d=e("50c4"),c=e("8418"),l=e("65f0"),u=e("1dde"),v=e("b622"),p=e("2d00"),_=v("isConcatSpreadable"),m=9007199254740991,h="Maximum allowed index exceeded",f=p>=51||!r((function(){var t=[];return t[_]=!1,t.concat()[0]!==t})),b=u("concat"),g=function(t){if(!i(t))return!1;var a=t[_];return void 0!==a?!!a:o(t)},C=!f||!b;s({target:"Array",proto:!0,forced:C},{concat:function(t){var a,e,s,r,o,i=n(this),u=l(i,0),v=0;for(a=-1,s=arguments.length;a<s;a++)if(o=-1===a?i:arguments[a],g(o)){if(r=d(o.length),v+r>m)throw TypeError(h);for(e=0;e<r;e++,v++)e in o&&c(u,v,o[e])}else{if(v>=m)throw TypeError(h);c(u,v++,o)}return u.length=v,u}})},b275:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("div",{staticClass:"banner",style:{backgroundImage:"url("+t.img.banner+")"}},[t._m(0)]),e("div",{staticClass:"container section960 mt-5"},[t._m(1),e("table",{staticClass:"table paymentTable mt-5"},[t._m(2),e("tbody",t._l(t.order.products,(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"itemPicture"},[e("img",{staticClass:"img-fluid",attrs:{src:a.product.imageUrl[0]}})]),e("td",[t._v(t._s(a.product.title))]),e("td",{staticClass:"text-center"},[t._v("x"+t._s(a.quantity))]),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(a.product.price)))])])})),0),e("tfoot",[t.order.coupon?e("tr",[e("td",{staticClass:"text-right py-3",attrs:{colspan:"3"}},[t._v("優惠折抵")]),e("td",{staticClass:"text-right"},[t._v("- NT "+t._s(t._f("currency")(t.order.amount*(100/t.order.coupon.percent)-t.order.amount*(100/t.order.coupon.percent)*(t.order.coupon.percent/100))))])]):t._e(),e("tr",[e("td",{staticClass:"text-right",class:{isCoupon:t.order.coupon},attrs:{colspan:"3"}},[t._v("總計")]),e("td",{staticClass:"text-right text-danger",class:{isCoupon:t.order.coupon}},[t._v(t._s(t._f("currency")(t.order.amount)))])])])]),e("table",{staticClass:"table orderOkTable mt-5"},[t._m(3),e("tbody",[e("tr",[e("td",{attrs:{width:"150px"}},[t._v("收件人姓名：")]),e("td",[t._v(t._s(t.order.user.name))])]),e("tr",[e("td",[t._v("收件人手機：")]),e("td",[t._v(t._s(t.order.user.tel))])]),e("tr",[e("td",[t._v("收件人Email：")]),e("td",[t._v(t._s(t.order.user.email))])]),e("tr",[e("td",[t._v("付款方式：")]),e("td",[t._v(t._s(t.order.payment))])]),e("tr",[e("td",[t._v("收件人地址：")]),e("td",[t._v(t._s(t.order.user.address))])]),e("tr",[e("td",[t._v("備註：")]),e("td",[t._v(t._s(t.order.message))])]),e("tr",[e("td",[t._v("付款狀態：")]),t.order.paid?t._e():e("td",{staticClass:"h5 text-danger"},[t._v("尚未付款")]),t.order.paid?e("td",{staticClass:"h5 text-info"},[t._v("已付款")]):t._e()])])]),t.order.paid?t._e():e("button",{staticClass:"btn btn-info d-block mx-auto mt-5",attrs:{type:"button"},on:{click:function(a){return t.payOrder()}}},[e("i",{staticClass:"fas fa-clipboard-check"}),t._v(" 確認付款 ")]),e("router-link",{attrs:{to:"/products"}},[t.order.paid?e("button",{staticClass:"btn btn-primary d-block mx-auto mt-5",attrs:{type:"button"}},[e("i",{staticClass:"fas fa-couch"}),t._v(" 繼續選購 ")]):t._e()])],1),t._m(4)],1)},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"bannerTitle"},[e("h1",[t._v("訂單完成")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"stepGroup d-flex justify-content-between mx-auto my-5 text-center"},[e("div",{staticClass:"stepBox"},[e("div",{staticClass:"num mx-auto h5"},[t._v("1")]),t._v(" 購物車 ")]),e("div",{staticClass:"stepBox"},[e("div",{staticClass:"num mx-auto h5"},[t._v("2")]),t._v(" 填寫資料 ")]),e("div",{staticClass:"stepBox current"},[e("div",{staticClass:"num mx-auto h5"},[t._v("3")]),t._v(" 訂單確認 ")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{colspan:"4"}},[t._v("購買清單")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("訂單資訊")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal fade",attrs:{id:"paymentModal",tabindex:"-1",role:"dialog"}},[e("div",{staticClass:"modal-dialog modal-sm modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),e("div",{staticClass:"modal-body text-center"},[e("div",{staticClass:"h5 text-info font-weight-bold"},[t._v("恭喜您")]),e("div",{staticClass:"h5 text-info font-weight-bold"},[t._v("付款成功")])])])])])}],o=(e("99af"),{name:"payment",data:function(){return{isLoading:!1,order:{user:{}},orderId:"",img:{banner:"https://hexschool-api.s3.us-west-2.amazonaws.com/custom/HYMjBNd1w2pIbmbPkhzBETIPArFvCdK1hbyk8ug7kQOcTNQQ6Htwffj3G7alDUPIW7ZnJloorvHNYWIBrv1y27DwbZtUCbaQ7ozv3QeG8TEU2HRpbbxx6ZS68xNiU5VO.jpg"}}},created:function(){this.isLoading=!0,this.orderId=this.$route.params.orderId,this.orderId&&this.getDetailed(this.orderId)},methods:{getDetailed:function(t){var a=this;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io/api/").concat("19ab659b-8d43-427e-8552-6517262b063b","/ec/orders/").concat(t);this.$http.get(e).then((function(t){a.order=t.data.data,a.isLoading=!1}))},payOrder:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/api/").concat("19ab659b-8d43-427e-8552-6517262b063b","/ec/orders/").concat(this.orderId,"/paying");this.$http.post(a).then((function(a){$("#paymentModal").modal("show"),setTimeout((function(){$("#paymentModal").modal("hide")}),5e3),a.data.data.paid&&t.getDetailed(t.orderId),t.isLoading=!1}))}}}),i=o,n=e("2877"),d=Object(n["a"])(i,s,r,!1,null,null,null);a["default"]=d.exports}}]);
//# sourceMappingURL=chunk-6782e2c0.a5dd9519.js.map